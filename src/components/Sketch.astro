---
interface Props {
  imageUrl: string;
  title: string;
  category: string;
  url?: string;
  size?: string;
  caseStudyUrl?: string;
}

const { imageUrl, title, category, url, size = "1", caseStudyUrl } = Astro.props;
---

<style>
  .sketch {
    --sketch-width-base: 100%;
    width: var(--sketch-width-base);
    margin-block-end: 1em;

    /* Use container queries where supported */
    @supports (container-type: inline-size) {
      @container (min-width: 800px) {
        --sketch-width-base: calc(50% - 1em);

        &[data-size="2"],
        &[data-size="3"] {
          --sketch-width-base: calc(100% - 1em);
        }
      }

      @container (min-width: 1000px) {
        --sketch-width-base: calc(33.333% - 1em);

        &[data-size="2"] {
          --sketch-width-base: calc(66.666% - 1em);
        }

        &[data-size="3"] {
          --sketch-width-base: calc(100% - 1em);
        }
      }

      @container (min-width: 2222px) {
        --sketch-width-base: calc(25% - 1em);

        &[data-size="2"] {
          --sketch-width-base: calc(50% - 1em);
        }

        &[data-size="3"] {
          --sketch-width-base: calc(75% - 1em);
        }
      }
    }

    /* Fallback to media queries for older browsers */
    @supports not (container-type: inline-size) {
      @media (min-width: 800px) {
        --sketch-width-base: calc(50% - 1em);

        &[data-size="2"],
        &[data-size="3"] {
          --sketch-width-base: calc(100% - 1em);
        }
      }

      @media (min-width: 1000px) {
        --sketch-width-base: calc(33.333% - 1em);

        &[data-size="2"] {
          --sketch-width-base: calc(66.666% - 1em);
        }

        &[data-size="3"] {
          --sketch-width-base: calc(100% - 1em);
        }
      }

      @media (min-width: 2222px) {
        --sketch-width-base: calc(25% - 1em);

        &[data-size="2"] {
          --sketch-width-base: calc(50% - 1em);
        }

        &[data-size="3"] {
          --sketch-width-base: calc(75% - 1em);
        }
      }
    }
  }

  img {
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  .sketch-info {
    margin-block-start: 0.5em;
  }
</style>

<div class="sketch" data-size={size}>
  <img src={imageUrl} alt={title} />
  <div class="sketch-info">
    <p>{title}</p>
    <em>{category}</em>
    {caseStudyUrl && <a href={caseStudyUrl}>※</a>}
    {url && <a href={url} target="_blank" rel="noopener">♨︎</a>}
  </div>
</div>
